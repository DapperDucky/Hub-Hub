{"slots":{"0":{"name":"Screen","type":{"events":[],"methods":[]}},"1":{"name":"Hub","type":{"events":[],"methods":[]}},"2":{"name":"slot3","type":{"events":[],"methods":[]}},"3":{"name":"slot4","type":{"events":[],"methods":[]}},"4":{"name":"slot5","type":{"events":[],"methods":[]}},"5":{"name":"slot6","type":{"events":[],"methods":[]}},"6":{"name":"slot7","type":{"events":[],"methods":[]}},"7":{"name":"slot8","type":{"events":[],"methods":[]}},"8":{"name":"slot9","type":{"events":[],"methods":[]}},"9":{"name":"slot10","type":{"events":[],"methods":[]}},"-1":{"name":"unit","type":{"events":[],"methods":[]}},"-3":{"name":"player","type":{"events":[],"methods":[]}},"-2":{"name":"construct","type":{"events":[],"methods":[]}},"-4":{"name":"system","type":{"events":[],"methods":[]}},"-5":{"name":"library","type":{"events":[],"methods":[]}}},"handlers":[{"code":"system.print(output)\n\nif output == 'NEXTPAGE' then\n    if (CurrentPage + 1 <= TotalPages and not RequestActive) then\n       CurrentPage = CurrentPage + 1\n       RequestActive = true\n    end\nelseif output == 'PREVPAGE' then\n    if (CurrentPage - 1 > 0 and not RequestActive) then\n       CurrentPage = CurrentPage - 1\n       RequestActive = true\n    end\nend\n\nScreen.clearScriptOutput()","filter":{"args":[{"variable":"*"}],"signature":"onOutputChanged(output)","slotKey":"0"},"key":"0"},{"code":"system.print('Hub Updated')\n\nItems = nil\nlocal items = Hub.getContent()\n\nfor k,v in ipairs(items) do\n    NewItem(items[k].id,items[k].quantity)\nend\n\n\n--local total = 0\n--for k,v in ipairs(Industry) do\n--    if Industry[k] ~= nil then\n--        total = k\n--        if release and mx > 0 and mx < 220 and my > (22+(50*k)) and my < (72+(50*k)) then SetSelected(k) end\n--        CreateHubRow(Industry[k],gridlayer,font,orefont,planetfont,k,rx,selected)\n--    end\n--end","filter":{"args":[],"signature":"onContentUpdate()","slotKey":"1"},"key":"1"},{"code":"unit.setTimer(\"Hub\", 1)\nunit.setTimer(\"Async\", 0.1)","filter":{"args":[],"signature":"onStart()","slotKey":"-1"},"key":"2"},{"code":"local timeleft = Hub.updateContent()\nsystem.print(\"Next Hub Call: \"..math.ceil(timeleft))","filter":{"args":[{"value":"Hub"}],"signature":"onTimer(tag)","slotKey":"-1"},"key":"3"},{"code":"if RequestActive then\n   SendItem()\nelseif SendPaginationResponse then\n   PaginationResponse()\nelse\n   Screen.setScriptInput(\"\")\nend","filter":{"args":[{"value":"Async"}],"signature":"onTimer(tag)","slotKey":"-1"},"key":"4"},{"code":"RequestActive = true","filter":{"args":[{"value":"option1"}],"signature":"onActionStart(action)","slotKey":"-4"},"key":"5"},{"code":"Json = require(\"dkjson\")\nItems = {}\nSendIndex = 0\nRequestActive = false\nSendPaginationResponse = false\nMaxItems = 20\nItemsSize = nil\nTotalPages = nil\nCurrentPage = 1\n\nfunction Ternary(c,x,y) if c then return x else return y end end\n\nfunction NewItem(id, quantity)\n   local this = {} \n   local item = {}\n   \n   if Items == nil then \n       Items = {}\n       ItemsSize = 0\n       TotalPages = 0\n   end\n    \n   item = system.getItem(id)\n   \n   this.Id = id\n   this.Quantity = math.floor(quantity)\n   this.Name = item.displayName\n   this.Icon = item.iconPath\n   this.Description = item.description\n   this.Type = item.type\n   this.UnitMass = item.unitMass\n   this.UnitVolume = item.unitVolume\n   this.Tier = item.tier\n   --this.Scale = item.scale\n   \n   ItemsSize = ItemsSize+1\n   TotalPages = math.floor(ItemsSize/MaxItems) + Ternary(math.fmod(ItemsSize,MaxItems) ~= 0, 1, 0)\n   table.insert(Items,this)\nend\n\nfunction ToItemString(item)\n    if item ~= nil then \n        return 'I~'..item.Id..'~'..item.Quantity..'~'..item.Name..'~'..item.Icon..'~'..item.Description..'~'..item.Type..'~'..item.UnitMass..'~'..item.UnitVolume..'~'..item.Tier --..'~'..item.Scale\n    else \n        return \"\" \n    end \nend\n\nfunction ToPaginationString()\n    if TotalPages ~= nil then\n       return 'P~'..TotalPages..'~'..CurrentPage\n    end\nend\n\nfunction SendItem()\n    SendIndex = SendIndex + 1\n    \n    if SendIndex <= MaxItems then\n       Screen.setScriptInput(ToItemString(Items[SendIndex*CurrentPage]))\n    else\n       SendIndex = 0\n       RequestActive = false\n       SendPaginationResponse = true\n    end\nend\n\nfunction PaginationResponse()\n   Screen.setScriptInput(ToPaginationString())\n   SendPaginationResponse = false\nend","filter":{"args":[],"signature":"onStart()","slotKey":"-5"},"key":"6"}],"methods":[],"events":[]}